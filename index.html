<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laporan Bungkus Kerupuk</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body { font-family: sans-serif; margin: 0; padding: 20px; background: #f4f4f4; }
        .container { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #333; }
        
        /* Tab Styles */
        .tabs { display: flex; cursor: pointer; margin-bottom: 20px; border-bottom: 2px solid #ddd; }
        .tab { flex: 1; text-align: center; padding: 10px; font-weight: bold; background: #eee; }
        .tab.active { background: #007bff; color: white; border-bottom: 2px solid #0056b3; }
        
        .content { display: none; }
        .content.active { display: block; }

        input, select, button { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        button { cursor: pointer; font-weight: bold; border: none; }
        .btn-wa { background: #25d366; color: white; }
        .btn-email { background: #007bff; color: white; }
        
        .result { background: #e9ecef; padding: 15px; border-radius: 5px; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h2>Laporan Kerja Harian</h2>
    
    <div class="tabs">
        <div class="tab active" onclick="openTab(event, 'YUGA')">MAMAH YUGA</div>
        <div class="tab" onclick="openTab(event, 'EMPUT')">MAMAH EMPUT</div>
    </div>

    <label>Pilih Tanggal Laporan:</label>
    <input type="date" id="tgl_laporan">
    
    <label>Jumlah Bungkus (Pax):</label>
    <input type="number" id="jumlah_pax" placeholder="Contoh: 100" oninput="hitung()">

    <div class="result">
        <strong>Harga per Pax:</strong> Rp500<br>
        <strong>Total Pendapatan:</strong> <span id="total_harga">Rp0</span>
    </div>

    <hr>
    <button class="btn-wa" onclick="kirimKe('wa')">Kirim via WhatsApp</button>
    <button class="btn-email" onclick="kirimKe('email')">Kirim via Email</button>
</div>

<script>
    let currentTab = "MAMAH YUGA";
    const hargaPerPax = 500;

    function openTab(evt, name) {
        let i, tablinks;
        tablinks = document.getElementsByClassName("tab");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        evt.currentTarget.className += " active";
        currentTab = "MAMAH " + name;
        hitung();
    }

    function hitung() {
        const jml = document.getElementById('jumlah_pax').value || 0;
        const total = jml * hargaPerPax;
        document.getElementById('total_harga').innerText = "Rp" + total.toLocaleString('id-ID');
        return {jml, total};
    }

    function formatPesan() {
        const tgl = document.getElementById('tgl_laporan').value || "Tidak dipilih";
        const data = hitung();
        let teks = `*LAPORAN KERJA BUNGKUS KERUPUK*\n\n`;
        teks += `Nama: ${currentTab}\n`;
        teks += `Tanggal: ${tgl}\n`;
        teks += `Jumlah: ${data.jml} pax\n`;
        teks += `Total Duit: Rp${data.total.toLocaleString('id-ID')}\n`;
        teks += `\nPokonya lunas ya!`;
        return encodeURIComponent(teks);
    }

    function kirimKe(platform) {
        const pesan = formatPesan();
        if (platform === 'wa') {
            window.open(`https://wa.me/?text=${pesan}`, '_blank');
        } else {
            const subject = encodeURIComponent(`Laporan Kerja - ${currentTab}`);
            window.location.href = `mailto:?subject=${subject}&body=${pesan}`;
        }
    }

    // Set tanggal hari ini otomatis
    document.getElementById('tgl_laporan').valueAsDate = new Date();
</script>

</body>
</html>
